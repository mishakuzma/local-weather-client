<!DOCTYPE html>

<style>
	body {
  		background-color: #99e6e6;
	}

	h1 {
  		font-family: 'Baloo Bhaina', cursive;
	}
</style>

<!-- jQuery 2.2.4 -->
<script>
	var key = "ab90a10ff5b266ae2955c6d1a48a1aa7";
	var lat, lon;
	$(document).ready(function() {
	  alert("This website will use your location to view the local weather.")
	  $.ajax({
	    url:"http://ip-api.com/json",
	    success: function(inLocat){showWeather(inLocat)},
	    error: alert("Nope")
	  });
	   
	});

	// Use ajax to put new information in <div> sections
	function showWeather(inLocat) {
	  alert(inLocat["lat"] + " " + inLocat["lon"]);
	  $.ajax({
	    url: "http://api.openweathermap.org/data/2.5/weather?lat="+ inLocat["lat"] + "&lon="+ inLocat["lon"] + "&APPID=ab90a10ff5b266ae2955c6d1a48a1aa7",
	    success: function(weatherData){
	      console.log(JSON.stringify(weatherData));
	      $("#weatherType").html(JSON.stringify(weatherData["weather"][0]["description"]));
	    },
	    error: function(objectRet){
	      console.log(JSON.stringify(objectRet));
	    }
	    
	  });
	  
	};

	// API error handling function. Shows unique error depending on error type
	function apiError(error) {
	  switch (error.code) {
	    case error.PERMISSION_DENIED:
	      alert("Permission denied.");
	      break;
	    case error.POSITION_UNAVAILABLE:
	      alert("No position available.");
	      break;
	    case error.TIME_OUT:
	      alert("Timed out when making request.");
	      break;
	    case error.UNKNOWN_ERROR:
	      alert("Error of unknown type.");
	      break;
	  }
	};
</script>

<!-- Google font: Baloo Bhaina-->
<link href="https://fonts.googleapis.com/css?family=Baloo+Bhaina" rel="stylesheet">

<html>
	<head></head>
	<body>
	  <div class="container">
	    <h1 class="row text-center">Local Weather Forecast</h1>
	    <div id="weatherType">Test1</div>
	    <div id="temperature">Test2</div>
	    <div id="tempMax">Test3</div>
	    <div id="tempMin">Test4</div>
	    <div id="tempButtons" class="text-center">
	      <button id = "converterButton" class="btn btn-primary"></button>
	    </div>
	  </div>
	</body>
</html>